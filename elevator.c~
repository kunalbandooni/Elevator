#include<mega16.h>
#include<delay.h>
int p=0,q=0;
void main()
{
 PORTC=0b00000000;
 DDRC=0b00001111;
 PORTD=0b00001110;
 DDRD=0b00000000;
 while(1)
 {
  while(PIND.1==0)
  {
   delay_ms(600);
   p=p+1;
  }     
  while(PIND.2==0)
  {
   delay_ms(600); 
   if(p>0)
   {
    p=p-1;
   }
  }
  while(PIND.3==0)
  { 
   delay_ms(400);
   while(p>q)
   {
    PORTC.0=1;
    PORTC.1=0;
    PORTC.2=1;
    PORTC.3=0;
    q=q+1; 
    delay_ms(1000);
    if(q==p)
    {
     PORTC.0=0;
     PORTC.1=0;
     PORTC.2=0;
     PORTC.3=0;
     delay_ms(5000);
     if(q==p)
     {
      p=0;
      while(p<q)
      {
       PORTC.0=0;
       PORTC.1=1;
       PORTC.2=0;
       PORTC.3=1;
       q=q-1;
       delay_ms(1000); 
       if(q==0)
       {
        PORTC.0=0;
        PORTC.1=0;
        PORTC.2=0;
        PORTC.3=0;
       }
      }
     }
    }
   }    
   while(p<q)
   {
    PORTC.0=0;
    PORTC.1=1;
    PORTC.2=0;
    PORTC.3=1;
    q=q-1;              
    delay_ms(1000);
    if(q==p)
    {
     PORTC.0=0;
     PORTC.1=0;
     PORTC.2=0;
     PORTC.3=0;
     delay_ms(5000);
     if(q==p)
     {
      p=0;
      while(p<q)
      {
       PORTC.0=0;
       PORTC.1=1;
       PORTC.2=0;
       PORTC.3=1;
       q=q-1;
       delay_ms(1000); 
       if(q==0)
       {
        PORTC.0=0;
        PORTC.1=0;
        PORTC.2=0;
        PORTC.3=0;
       }
      }
     }
    }
   }
  }      
 }
}